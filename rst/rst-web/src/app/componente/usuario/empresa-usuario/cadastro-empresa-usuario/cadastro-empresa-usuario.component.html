<ng2-toasty></ng2-toasty>
<app-bloqueio></app-bloqueio>
<p class="titulo-pagina">
    {{'app_rst_usuario_empresa_subtitulo_associar_empresa' | recurso}}
</p>

<div class="container-form container-pesquisar">
    <div class="row">
        <div class="form-group col-sm-8">
            <md-input-container [floatPlaceholder]="true">
                <input mdInput placeholder="{{ 'app_rst_labels_razao_social' | recurso }}" type="text"
                       name="razaoSocial" [(ngModel)]="filtro.razaoSocial" class="form-control" id="razaoSocial"
                       maxlength="160" #razaoSocialFiltro="ngModel">
            </md-input-container>
        </div>
        <div class="form-group col-sm-4">
            <md-input-container [floatPlaceholder]="true">
                <input mdInput placeholder="{{ 'app_rst_labels_cnpj' | recurso }}" type="text"
                       [textMask]="{mask: mascaraCnpj, guide: false}" name="cnpj" [(ngModel)]="filtro.cnpj"
                       class="form-control" id="cnpj" #cnpjFiltro="ngModel">
            </md-input-container>
        </div>
    </div>
    <div class="row">
        <div class="form-group col-md-6 col-lg-4">
            <md-input-container [floatPlaceholder]="true">
                <input mdInput placeholder="{{ 'app_rst_labels_nome_fantasia' | recurso }}" type="text"
                       name="nomeFantasia" [(ngModel)]="filtro.nomeFantasia" class="form-control" id="nomeFantasia"
                       maxlength="160" #nomeFantasia="ngModel">
            </md-input-container>
        </div>
    </div>
</div>

<div class="btn-filter-pesquisar space-up">
    <button class="btn btn-primary" (click)="pesquisar()">{{'app_rst_btn_pesquisar' | recurso}}</button>
    <button class="btn btn-secondary" (click)="voltar()">{{'app_rst_btn_voltar' | recurso}}</button>
</div>

<div class="container-form space-up" *ngIf="isNotEmpty(listaEmpresa) && isNotBarramento()">
    <div class="grid-pesquisa">
        <table class="table table-hover">
            <thead>
            <tr>
                <th class="label text-center">&nbsp;</th>
                <th class="label"><span>{{ 'app_rst_labels_razao_social' | recurso }}</span></th>
                <th class="label"><span>{{ 'app_rst_labels_nome_fantasia' | recurso }}</span></th>
                <th class="label"><span>{{ 'app_rst_labels_cnpj' | recurso }}</span></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of listaEmpresa">
                <th class="label text-center">
                    <fieldset>
                        <md-checkbox [(ngModel)]="checks[item.id]" name="rdoLista"
                                     (change)="selecionar(item, $event, item.id)"
                                     class="radio-tabela-pesquisa"></md-checkbox>
                    </fieldset>
                </th>
                <th class="col-quebra">&nbsp;{{item.razaoSocial}}</th>
                <th class="col-quebra">&nbsp;{{item.nomeFantasia}}</th>
                <th class="col-nao-quebra">{{item.cnpj | cnpjPipe }}</th>
            </tr>
            </tbody>
        </table>
        <div class="btn-paginacao">
            <pagination [firstText]="paginacao.textPrimeiro" [lastText]="paginacao.textUltimo"
                        [nextText]="paginacao.textProximo" [previousText]="paginacao.textAnterior"
                        [totalItems]="paginacao.totalItens" [(ngModel)]="paginacao.pagina"
                        [itemsPerPage]="paginacao.qtdRegistro"
                        (numPages)="paginacao.numPages = $event" (pageChanged)="pageChanged($event)"
                        [maxSize]="paginacao.maxSize" class="pagination-sm justify-content-center" [align]="true"
                        [boundaryLinks]="true" [rotate]="false"></pagination>
        </div>
    </div>
</div>

<div class="row" *ngIf="isNotEmpty(listaEmpresa)">
    <div class="col-3">
        <div class="md-container md-custom">
            <md-select placeholder="{{'app_rst_menu_perfil' | recurso}}" name="perfil-select"
                       [(ngModel)]="filtro.perfil" id="selectDepRegional ">
                <md-option value=''>{{'app_rst_labels_selecione' | recurso}}</md-option>
                <md-option *ngFor='let perfil of perfis' [value]="perfil.codigo">{{perfil.nome}}</md-option>
            </md-select>
        </div>
    </div>
    <div class="col-1">
        <div class="btn-rodape-acoes space-up">
            <button type="button" class="btn btn-primary" (click)="adicionarUsuarioEntidade()">{{
                'app_rst_btn_salvar' |
                recurso
                }}
            </button>
        </div>
    </div>
</div>
